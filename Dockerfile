FROM debian:bullseye

MAINTAINER Josh Bressers "josh@bress.net"

RUN apt-get update && apt-get install -y python3-pip python3-dev wget curl

WORKDIR /

RUN pip3 install elasticsearch

COPY ./docker/load-data.sh /root/
COPY ./docker/dashboards-8_4_1.ndjson /root/
COPY ./get-cve-json.sh /root/
COPY ./cve-index-json-mapping.json /root/
COPY ./json-parse.py /root/
COPY ./update-es.sh /root/

RUN cd /root && ./get-cve-json.sh

ENTRYPOINT [ "/root/load-data.sh" ]

